import java.io.*;
import java.util.*;

public class Solution {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        
        String s[] = br.readLine().split(" ");
        int n = Integer.parseInt(s[0]);
        int q = Integer.parseInt(s[1]);
        
        int arr[] = new int[n];
        String nums[] = br.readLine().split(" ");
        for(int i=0;i<n;i++){
            arr[i] = Integer.parseInt(nums[i]);
        }
        
        StringBuilder ans = new StringBuilder();
        
        for(int i=0;i<q;i++){
            String line[] = br.readLine().split(" ");
            int t = Integer.parseInt(line[0]);
            
            if(t==1){
                int idx = Integer.parseInt(line[1]);
                int val = Integer.parseInt(line[2]);
                arr[idx-1] = val;
            } else if(t==2){
                int l = Integer.parseInt(line[1]);
                int r = Integer.parseInt(line[2]);
                int k = Integer.parseInt(line[3]);
                int cnt = 0;
                for(int j=l-1;j<=r-1;j++){
                    if(arr[j] % k == 0) cnt++;
                }
                ans.append(cnt + "\n");
            }
        }
        
        System.out.print(ans.toString());
    }
}
