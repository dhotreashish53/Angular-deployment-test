import java.io.*;
import java.util.*;

public class Solution {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        
        int n = Integer.parseInt(br.readLine().trim());  // number of elements
        String nq[] = br.readLine().split(" ");
        int q = Integer.parseInt(nq[0]); // number of queries
        // nq[1] seems unused in sample, but keeping it
        int dummy = Integer.parseInt(nq[1]); 
        
        int arr[] = new int[n];
        String nums[] = br.readLine().split(" ");
        for(int i=0;i<n;i++){
            arr[i] = Integer.parseInt(nums[i]);
        }
        
        StringBuilder sb = new StringBuilder();
        
        for(int i=0;i<q;i++){
            String line[] = br.readLine().split(" ");
            int type = Integer.parseInt(line[0]);
            
            if(type==1){
                int idx = Integer.parseInt(line[1]);
                int val = Integer.parseInt(line[2]);
                arr[idx] = val; // 0-based index
            }
            else if(type==2){
                int l = Integer.parseInt(line[1]);
                int r = Integer.parseInt(line[2]);
                int k = Integer.parseInt(line[3]);
                int cnt = 0;
                for(int j=l;j<=r;j++){
                    if(arr[j] % k == 0){
                        cnt++;
                    }
                }
                sb.append(cnt).append("\n");
            }
        }
        
        System.out.print(sb.toString());
    }
}
