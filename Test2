import java.io.*;
import java.util.*;

public class Solution {
    public static void main(String args[]) throws Exception {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String first[] = br.readLine().split(" ");
        int n = Integer.parseInt(first[0]);
        int q = Integer.parseInt(first[1]);

        int nums[] = new int[n];
        String temp[] = br.readLine().split(" ");
        for(int i=0;i<n;i++){
            nums[i] = Integer.parseInt(temp[i]);
        }

        StringBuilder sb = new StringBuilder();
        for(int i=0;i<q;i++){
            String parts[] = br.readLine().split(" ");
            int type = Integer.parseInt(parts[0]);
            
            if(type==1){
                int pos = Integer.parseInt(parts[1]); // this is 1 based
                int val = Integer.parseInt(parts[2]);
                nums[pos-1] = val;
            }
            else if(type==2){
                int left = Integer.parseInt(parts[1]);
                int right = Integer.parseInt(parts[2]);
                int k = Integer.parseInt(parts[3]);
                int cnt = 0;
                for(int j=left-1;j<=right-1;j++){
                    if(nums[j] % k == 0){
                        cnt++;
                    }
                }
                sb.append(cnt + "\n");
            }
            else{
                // not expected but just in case
                System.out.println("wrong query");
            }
        }
        System.out.print(sb.toString());
    }
}
